!function(c){"use strict";etTheme.autoinit.variationGallery=etTheme.variationGallery=function(){var i,e,a,r,t=c(".variations_form"),n=0<c(t).length,o=t.data("product_id"),l=c(".images-wrapper").hasClass("swiper-vertical-images"),s=c(document).find(".quick-view-popup"),m=(s.length&&(t=s.find(".variations_form")),i=t,e=o,n&&wp.ajax.send("et_get_default_variation_gallery",{data:{product_id:e},success:function(t){c(i).data("et_variation_gallery_default",t),etTheme.global_image_lazy(),etTheme.resizeVideo(),setTimeout(function(){c(window).trigger("resize")},500)},error:function(t){c(i).data("et_variation_gallery_default",[]),etTheme.et_notice("variationGalleryNotAvailable","error"," "+e+".")}}),a=t,o=o,n&&wp.ajax.send("et_get_available_variation_images",{data:{product_id:o},success:function(t){c(a).data("et_variation_gallery_variation_images",r),!r||r.length<1?r=c(a).data("et_variation_gallery_default"):d(r)},error:function(t){c(a).data("et_variation_gallery_variation_images",[])}}),t.on("found_variation",function(t,i){var e,a,r,n;1==i.variation_gallery_images.length&&c(this).data("et_variation_gallery_default")&&1<=c(this).data("et_variation_gallery_default").length?c(this).data("et_variation_gallery_default")[0].url==i.variation_gallery_images[0].url?d(c(this).data("et_variation_gallery_default")):(e=c(document).find(".swiper-control-top .main-images .swiper-slide").first().find("a"),a=c(document).find(".thumbnails-list .thumbnail-item").first().find("a"),i.image.url&&(a&&a.attr("href",i.image.url),e)&&e.attr("href",i.image.url),i.image.src&&(a&&a.find("img").attr("src",i.image.src),e)&&(e.find("img").attr("src",i.image.src),i.image.full_src&&e.parent().find("img.zoomImg").attr("src",i.image.full_src),c.fn.zoom)&&!s.length&&wc_single_product_params.zoom_enabled&&(e.parent().trigger("zoom.destroy"),n=e.find("img"),r=c(e).parent().width(),n.data("large_image_width")>r)&&(n=c.extend({touch:!1},wc_single_product_params.zoom_options),"ontouchstart"in document.documentElement?n.on="click":c(e).parent().zoom(n)),i.image.srcset&&(a&&a.find("img").attr("srcset",i.image.srcset),e)&&e.find("img").attr("srcset",i.image.srcset)):d(i.variation_gallery_images),m(),c(document).trigger("variable_product_found_variation")}).on("reset_image",function(t){let i=c(document).find(".swiper-control-top .main-images .swiper-slide").first().find("a");setTimeout(function(){i.parent().find("img.zoomImg").attr("src",i.attr("href")),i.find("img").attr("data-large_image",i.attr("href"))},700)}).on("reset_data",function(){c(this).data("et_variation_gallery_default")&&d(c(this).data("et_variation_gallery_default")),m(),c(document).trigger("variable_product_found_variation")}),function(){var t=c(".main-images").data("Swiper"),i=c(".thumbnails-list").data("Swiper");void 0!==t&&etTheme.swipers["swiper-"+index].slideTo(0),l?c(".thumbnails-list").slick("slickGoTo",0):void 0!==i&&etTheme.swipers["swiper-"+index].slideTo(0)});function d(t){var i;t&&n&&(i=t.map(function(t){return wp.template("et-variation-gallery-thumbnail-template")(t)}).join(""),c(".thumbnails-list").parent().removeClass("dt-hide mob-hide"),c(".swiper-control-top").find(".swiper-custom-left, .swiper-custom-right").removeClass("dt-hide mob-hide"),c(".thumbnails-list.vertical-thumbnails").find(".slick-arrow").remove(),c(".swiper-wrapper.thumbnails-list, .thumbnails-list.vertical-thumbnails .slick-track").html(i),t.length<=1&&(c(".swiper-wrapper.thumbnails-list").parent().addClass("dt-hide mob-hide"),c(".swiper-control-top").find(".swiper-custom-left, .swiper-custom-right").addClass("dt-hide mob-hide")),i=t.map(function(t){return wp.template("et-variation-gallery-slider-template")(t)}).join(""),c(".swiper-control-top .main-images").html(i),etTheme.global_image_lazy(),etTheme.resizeVideo(),setTimeout(function(){l&&(c(".thumbnails-list.vertical-thumbnails .slick-arrow").remove(),c(".thumbnails-list.vertical-thumbnails").slick("reinit"),c(".pswp-main-image img").on("load",function(){c(".thumbnails-list.vertical-thumbnails").slick("reinit")})),c(window).trigger("resize")},500),c.fn.zoom)&&!s.length&&wc_single_product_params.zoom_enabled&&c(".woocommerce-product-gallery__image").each(function(t,i){var e=c(i).width(),a=c(i).find("img");c(i).trigger("zoom.destroy"),a.data("large_image_width")>e&&(a=c.extend({touch:!1},wc_single_product_params.zoom_options),"ontouchstart"in document.documentElement?a.on="click":c(i).zoom(a))})}}}(jQuery);
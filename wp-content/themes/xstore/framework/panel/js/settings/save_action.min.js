jQuery(document).ready(function(i){var o={popup:i(".et_panel-popup"),closePopupIcon:'<span class="et_close-popup et-button-cancel et-button"><i class="et-admin-icon et-delete"></i></span>',spinner:'<div class="et-loader ">\t\t\t\t\t<svg class="loader-circular" viewBox="25 25 50 50">\t\t\t\t\t<circle class="loader-path" cx="50" cy="50" r="12" fill="none" stroke-width="2" stroke-miterlimit="10"></circle>\t\t\t\t\t</svg>\t\t\t\t</div>',i:0,j:0},r=function(){i("body").addClass("et_panel-popup-on"),o.popup.removeClass("style-2").html(o.spinner)},p=function(t,e,n){o.popup.removeClass("style-2").html("").addClass("loading"),("boolean"==typeof e&&1==e||void 0===e)&&o.popup.prepend(o.closePopupIcon),o.popup.append(t.response.icon),o.popup.append(t.response.msg),o.popup.addClass("active").removeClass("loading"),"boolean"==typeof n&&1==n&&(window.location=window.location.href)},l=(i(document).on("change",'form.xstore-panel-settings[data-in-popup="yes"]',function(t){i(this).data("et_triggered")||(i(this).find('button[type="submit"]').removeClass("et-button-grey2").attr("style",null),i(this).data("et_triggered","yes"))}),i(document).on("keyup keydown",'form.xstore-panel-settings[data-in-popup="yes"] textarea, form.xstore-panel-settings[data-in-popup="yes"] input',function(t){var e=i(this).parents("form.xstore-panel-settings");i(e).data("et_triggered")||(i(e).find('button[type="submit"]').removeClass("et-button-grey2").attr("style",null),i(e).data("et_triggered","yes"))}),i(document).on("click",'form.xstore-panel-settings[data-in-popup="yes"] .xstore-panel-repeater .add-item, form.xstore-panel-settings[data-in-popup="yes"] .xstore-panel-repeater .remove-item',function(t){console.log("click");var e=i(this).parents("form.xstore-panel-settings");i(e).data("et_triggered")||(i(e).find('button[type="submit"]').removeClass("et-button-grey2").attr("style",null),i(e).data("et_triggered","yes"))}),i(document).on("submit","form.xstore-panel-settings",function(t){t.preventDefault();var e=[],n=[],t=i(this).attr("data-settings-name"),a=i(this).attr("data-save-tab"),s=i(this).attr("data-in-popup"),o=s?i(this).parent():i(this).parent().parent().find(".et-tabs-content");s?i(this).find('button[type="submit"]').addClass("loading"):r(),o.each(function(){var t=s?a:i(this).attr("data-tab-content");a&&t!==a||"import"!==t&&(e.push(t),i(this).find(".xstore-panel-sortable, .xstore-panel-repeater").each(function(){var t=i(this).find(".xstore-panel-sortable-items").sortable("toArray",{attribute:"data-name"});i(this).find(".option-val").val(t)}),t=(t=i(this).find("form").serializeArray()).concat(i(this).find(".xstore-panel-option-switcher input[type=checkbox]:not(:checked)").map(function(){return{name:this.name,value:""}}).get()),n.push(t))}),l(e,n,t,s)}),function(t,n,a,s){i.ajax({method:"POST",url:XStorePanelSettingsConfig.ajaxurl,dataType:"JSON",data:{action:"xstore_panel_settings_save",settings:n[o.i],type:t[o.i],settings_name:a},success:function(e){if(t.slice(o.i,t.length),n.slice(o.i,n.length),o.i<t.length)l(t,n,a,s),o.i++;else{if(s){o.popup.find("button[type=submit]").removeClass("loading");let t=o.popup.find(".saving-alert");console.log(t),t.text(i(e.response.msg).text()).removeClass("hidden").slideDown(),setTimeout(function(){t.slideUp()},5e3)}else p(e);o.i=0}},error:function(){o.i=0,alert(XStorePanelSettingsConfig.ajaxError)}})})});
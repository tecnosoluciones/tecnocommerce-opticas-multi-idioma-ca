(globalThis.itsecWebpackJsonP=globalThis.itsecWebpackJsonP||[]).push([[7013,1511],{31511:(e,t,r)=>{"use strict";r.d(t,{sE:()=>w,x4:()=>g,PN:()=>h,pL:()=>T,NC:()=>P,N4:()=>O,g4:()=>N,bK:()=>L,Rg:()=>A,CO:()=>D,AW:()=>v,SU:()=>I,k0:()=>R,ZE:()=>S,UC:()=>b,xJ:()=>x,z8:()=>m,VG:()=>M,Y3:()=>W,bv:()=>_});var n=r(92819),s=r(65096),o=r.n(s),i=r(6293),c=r(73470),a=r(95122),u=r(4942),p=r(13092),l=r(86033);function d(e,t,r){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,r)}var f=new WeakMap,E=new WeakMap;class h{constructor(e=void 0,t=void 0,r=void 0){d(this,f,{writable:!0,value:{}}),d(this,E,{writable:!0,value:{}}),(0,u.Z)(this,"add",((e,t,r)=>((0,l.Z)(this,f)[e]||((0,l.Z)(this,f)[e]=[]),(0,l.Z)(this,f)[e].push(t),r&&((0,l.Z)(this,E)[e]||((0,l.Z)(this,E)[e]=[]),(0,l.Z)(this,E)[e].push(r)),this))),(0,u.Z)(this,"hasErrors",(()=>this.getErrorCodes().length>0)),(0,u.Z)(this,"getErrorCodes",(()=>Object.keys((0,l.Z)(this,f)))),(0,u.Z)(this,"getErrorCode",(()=>this.getErrorCodes()[0])),(0,u.Z)(this,"getErrorMessages",((e=void 0)=>{if(e)return(0,l.Z)(this,f)[e];const t=[];for(const e in(0,l.Z)(this,f))(0,l.Z)(this,f).hasOwnProperty(e)&&t.concat((0,l.Z)(this,f)[e]);return t})),(0,u.Z)(this,"getErrorMessage",((e=void 0)=>(e=e||this.getErrorCode(),this.getErrorMessages(e)[0]))),(0,u.Z)(this,"getErrorData",((e=void 0)=>(e=e||this.getErrorCode(),(0,l.Z)(this,E)[e]))),(0,u.Z)(this,"getAllErrorMessages",(()=>{const e=[];for(const t in(0,l.Z)(this,f))(0,l.Z)(this,f).hasOwnProperty(t)&&e.push(...(0,l.Z)(this,f)[t]);return e})),e&&(t&&((0,l.Z)(this,f)[e]=[t]),r&&((0,l.Z)(this,E)[e]=r))}static fromPHPObject(e){const t=new h;return(0,p.Z)(t,f,e.errors),(0,p.Z)(t,E,e.error_data),t}static fromApiError(e){const t=new h;if((0,l.Z)(t,f)[e.code]=[e.message],(0,l.Z)(t,E)[e.code]=[e.data],e.additional_errors)for(const r of e.additional_errors)(0,l.Z)(t,f)[r.code]=[r.message],r.data&&((0,l.Z)(t,E)||(0,p.Z)(t,E,[]),(0,l.Z)(t,E)[r.code].push(r.data));return t}}class y extends Error{constructor(e,...t){super(e.message||(0,a.__)("An unknown error occurred.","it-l10n-ithemes-security-pro"),...t),Error.captureStackTrace&&Error.captureStackTrace(this,y),this.__response=e;for(const t in e)e.hasOwnProperty(t)&&Object.defineProperty(this,t,{value:e[t],configurable:!0,enumerable:!0,writable:!0})}toString(){return this.__response.toString()}getResponse(){return this.__response}}class g{constructor(e,t,r,n=[],s=[],o=[]){(0,u.Z)(this,"type",void 0),(0,u.Z)(this,"error",void 0),(0,u.Z)(this,"data",void 0),(0,u.Z)(this,"success",void 0),(0,u.Z)(this,"info",void 0),(0,u.Z)(this,"warning",void 0),this.type=e,this.error=t,this.data=r,this.success=n,this.info=s,this.warning=o,Object.seal(this)}isSuccess(){return this.type===g.SUCCESS}static async fromResponse(e){const t=t=>{const r=e.headers?.get(`X-Messages-${t}`);return r?JSON.parse(r):[]},r=204!==e.status&&e.json?await e.json():null,n=P(r),s=n.hasErrors()?g.ERROR:g.SUCCESS,o=t("Success"),i=t("Info"),c=t("Warning");return new g(s,n,r,o,i,c)}}Object.defineProperty(g,"SUCCESS",{value:"success",writable:!1,enumerable:!1,configurable:!1}),Object.defineProperty(g,"ERROR",{value:"error",writable:!1,enumerable:!1,configurable:!1});const C=(0,i.createContext)({getUrl(e,t){e="settings"===e?"itsec":"itsec-"+e;const r=(0,c.removeQueryArgs)(document.location.href,...Object.keys((0,c.getQueryArgs)(document.location.href)));return(0,c.addQueryArgs)(r,t?{page:e,path:t}:{page:e})}});function _(e,t){const{getUrl:r}=(0,i.useContext)(C);return r(e,t)}function m(e){if(e<=999)return e.toString();if(e<=9999){const t=(e/1e3).toFixed(1);return"0"===t.charAt(t.length-1)?t.replace(".0","k"):`${t}k`}if(e<=99999)return e.toString().substring(0,2)+"k";if(e<=999999)return e.toString().substring(0,3)+"k";if(e<=9999999){const t=(e/1e6).toFixed(1);return"0"===t.charAt(t.length-1)?t.replace(".0","m"):`${t}m`}if(e<=99999999)return e.toString().substring(0,2)+"m";if(e<=999999999)return e.toString().substring(0,3)+"m";if(e<=9999999999){const t=(e/1e9).toFixed(1);return"0"===t.charAt(t.length-1)?t.replace(".0","b"):`${t}b`}return e}function S(e){if(!(0,n.isPlainObject)(e))return!1;const t=Object.keys(e);return 2===t.length&&t.includes("errors")&&t.includes("error_data")}function R(e){if(!(0,n.isPlainObject)(e))return!1;const t=Object.keys(e);return(3===t.length||4===t.length)&&!(4===t.length&&!t.includes("additional_errors"))&&t.includes("code")&&t.includes("message")&&t.includes("data")}function P(e){return e instanceof h?e:S(e)?h.fromPHPObject(e):R(e)?h.fromApiError(e):new h}function O(e){const t={};for(const[r,n]of e)t[r]=n;return t}function T(e,t){const r=[[],[]];for(const n of e)r[t(n)?0:1].push(n);return r}function x(e){if(e instanceof Error)throw e;throw new y(e)}const w="https://secure.gravatar.com/avatar/d7a973c7dab26985da5f961be7b74480?s=96&d=mm&f=y&r=g";function I(e,t,r=!0){return(0,n.get)(e,["_links","self",0,"targetHints",t],r?void 0:[])}function v(e){return A(e,"self")}function A(e,t){return(0,n.get)(e,["_links",t,0,"href"])}function D(e,t){if(e&&e.links)for(const r of e.links)if(r.rel===t)return r}function b(e,t){if("object"!==e.type)return e;let r;for(const s in t)t.hasOwnProperty(s)&&"hidden"===t[s]["ui:widget"]&&(r||(r=(0,n.cloneDeep)(e)),delete r.properties[s]);return r||e}function W(e){let t=[];if(!e)return t;const r=e instanceof h?e:P((0,n.pick)(e,["code","message","data"]));return"rest_invalid_param"===r.getErrorCode()&&(t=Object.values(r.getErrorData().params)),[...r.getAllErrorMessages(),...t]}function M(e){const t=new Date;if(e>t)return(0,a.__)("Online Recently","it-l10n-ithemes-security-pro");const r=Math.floor((t-e)/1e3);let n=r/31536e3;return n>1?(0,a.sprintf)((0,a.__)("%s years","it-l10n-ithemes-security-pro"),Math.floor(n)):(n=r/2592e3,n>1?(0,a.sprintf)((0,a.__)("%s months","it-l10n-ithemes-security-pro"),Math.floor(n)):(n=r/86400,n>1?(0,a.sprintf)((0,a.__)("%s days","it-l10n-ithemes-security-pro"),Math.floor(n)):(n=r/3600,n>1?(0,a.sprintf)((0,a.__)("%s hours","it-l10n-ithemes-security-pro"),Math.floor(n)):(n=r/60,n>1?(0,a.sprintf)((0,a.__)("%s minutes","it-l10n-ithemes-security-pro"),Math.floor(n)):(0,a.sprintf)((0,a.__)("%s seconds","it-l10n-ithemes-security-pro"),Math.floor(n))))))}function N(){return N.instance||(N.instance=new(o())({schemaId:"id"}),N.instance.addMetaSchema(r(27171)),N.instance.addFormat("html",{type:"string",validate:()=>!0}),N.instance.addFormat("relative-file-path",{type:"string",validate:e=>!e.includes("../")}),N.instance.addFormat("file-path",{type:"string",validate:e=>!!e.startsWith("/")&&!e.includes("../")}),N.instance.addFormat("directory",{type:"string",validate:e=>!!e.startsWith("/")&&!e.includes("../")})),N.instance}function L(e){const t=e.toUpperCase().split("").map((e=>127397+e.charCodeAt()));return String.fromCodePoint(...t)}},98905:(e,t,r)=>{"use strict";r.r(t),r.d(t,{STORE_NAME:()=>Ye});var n={};r.r(n),r.d(n,{CREATE_EXPORT:()=>X,DELETE_EXPORT:()=>q,EDIT_IMPORT_ROLE_MAP:()=>Q,EDIT_IMPORT_SOURCES:()=>z,EDIT_IMPORT_USER_MAP:()=>K,FINISH_EXPORT:()=>H,IMPORT_RESET:()=>Y,RECEIVE_EXPORTS:()=>j,RECEIVE_SOURCES:()=>V,SET_EXPORT_ERROR:()=>$,VALIDATED_EXPORT:()=>G,VALIDATE_EXPORT_DATA:()=>J,VALIDATE_EXPORT_FILE:()=>B,WPC_APPLICATION_APPROVED:()=>oe,WPC_APPLICATION_REJECTED:()=>se,WPC_CHECK_SUPPORT:()=>ie,WPC_CREATE_EXPORT:()=>ue,WPC_DELETE_CREDENTIALS:()=>de,WPC_DELETE_CREDENTIALS_SUCCESS:()=>fe,WPC_DISCOVERED_REST_API:()=>ne,WPC_DISCOVER_REST_API:()=>re,WPC_ENTER_WEBSITE:()=>te,WPC_FINISH_EXPORT:()=>pe,WPC_RECEIVE_APP_PASSWORD:()=>le,WPC_RECEIVE_EXPORTS:()=>ce,WPC_RECEIVE_SOURCES:()=>ae,WPC_RESET:()=>ee,applyExportData:()=>k,completeImport:()=>U,createExport:()=>C,deleteExport:()=>_,deleteExports:()=>m,editImportRoleMap:()=>L,editImportSources:()=>M,editImportUserMap:()=>N,receiveExports:()=>g,receiveSources:()=>y,resetImport:()=>F,transformImportExportData:()=>Z,validateExportData:()=>R,validateExportFile:()=>S,wpConnectApplicationApproved:()=>w,wpConnectApplicationRejected:()=>I,wpConnectCreateExport:()=>b,wpConnectDeleteCredentials:()=>W,wpConnectDiscoverRestApi:()=>x,wpConnectEnterWebsite:()=>O,wpConnectReceiveAppPassword:()=>v,wpConnectReceiveExports:()=>A,wpConnectReceiveSources:()=>D,wpConnectReset:()=>P});var s={};r.r(s),r.d(s,{areWpConnectCredentialsExpired:()=>Je,getExports:()=>xe,getImportExportData:()=>ve,getImportExportRoleReplacementTargets:()=>Ze,getImportExportSource:()=>De,getImportExportUserReplacementTargets:()=>Le,getImportExportValidationResult:()=>Ae,getImportRoleMap:()=>Me,getImportSources:()=>be,getImportUserMap:()=>We,getLastCreatedExportResult:()=>Ie,getSources:()=>Te,getWpConnectAppPasswordsAuthEndpoint:()=>Qe,getWpConnectCredentials:()=>Be,getWpConnectCredentialsIntrospection:()=>ze,getWpConnectDiscoveryResult:()=>Ge,getWpConnectExport:()=>qe,getWpConnectExports:()=>Fe,getWpConnectRestApiEndpoint:()=>Ke,getWpConnectSiteUrl:()=>Ue,getWpConnectSources:()=>Xe,getWpConnectStep:()=>ke,hasWpConnectExports:()=>Ve,hasWpConnectSources:()=>je,isCreatingExport:()=>we,isDeletingWpConnectCredential:()=>$e,wpConnectIsCreating:()=>He});var o={};r.r(o),r.d(o,{getExports:()=>tt,getSources:()=>et,getWpConnectCredentialsIntrospection:()=>st,getWpConnectExports:()=>rt,getWpConnectSources:()=>nt});var i=r(48015),c=r(31600),a=r(95122),u=r(31511);function p(e){return{type:"WP_CONNECT_FETCH",request:e}}function l(e,{url:t,path:r,headers:n,...s}){const o=e.select(Ye).getWpConnectCredentials();if(!(t=t||e.select(Ye).getWpConnectRestApiEndpoint(r)))throw{code:"not_connected",message:(0,a.__)("Solid Security is not connected to a site to fetch exports.","it-l10n-ithemes-security-pro")};if(!o)throw{code:"not_authenticated",message:(0,a.__)("Solid Security has not authenticated with the site to fetch exports.","it-l10n-ithemes-security-pro")};return{url:t,headers:{Authorization:`Basic ${window.btoa(o.username+":"+o.password)}`,...n||{}},credentials:"omit",...s}}const d={WP_CONNECT_FETCH:(0,i.createRegistryControl)((e=>({request:t})=>{try{return c.controls.API_FETCH({request:l(e,t)})}catch(e){return Promise.reject(e)}})),WP_CONNECT_FETCH_RESULT:(0,i.createRegistryControl)((e=>({request:t})=>{try{return c.controls.API_FETCH_RESULT({request:l(e,t)})}catch(e){return new u.x4(u.x4.ERROR,new u.PN(e.code,e.message))}}))};var f=r(92819),E=r(87375),h=r(62470);function y(e){return{type:V,sources:e}}function g(e){return{type:j,exports:e}}function*C(e){yield{type:X,export:e};const t=yield(0,c.apiFetchResult)({path:"/ithemes-security/v1/import-export/exports",method:"POST",data:e});return yield{type:H,result:t},t}function*_(e){yield(0,c.apiFetch)({path:`/ithemes-security/v1/import-export/exports/${e}`,method:"DELETE"}),yield{type:q,id:e}}function*m(e){let t;try{t=yield(0,c.apiFetch)({path:"/batch/v1",method:"POST",data:{requests:e.map((e=>({method:"DELETE",path:`/ithemes-security/v1/import-export/exports/${e}`})))}})}catch(e){return yield(0,c.createNotice)("error",e.message||(0,a.__)("Could not delete exports.","it-l10n-ithemes-security-pro")),e}for(let r=0;r<e.length;r++){const n=t.responses[r];n.status>=400?yield{type:$,id:e[r],error:n.body}:yield{type:q,id:e[r]}}}function*S(e,t="upload"){yield{type:B,file:e,source:t};const r=new window.FormData;r.append("file",e);const n=yield(0,c.apiFetchResult)({path:"ithemes-security/rpc/import/validate",method:"POST",body:r});yield{type:G,result:n}}function*R(e,t="connect"){yield{type:J,data:e,source:t};const r=yield(0,c.apiFetchResult)({path:"ithemes-security/rpc/import/validate",method:"POST",data:e});yield{type:G,result:r}}function*P(){yield(0,c.dispatch)(Ye,"wpConnectDeleteCredentials"),yield{type:ee}}function O(e){return{type:te,url:e}}function T(e){return(0,c.apiFetchResult)({path:"/ithemes-security/rpc/discover",method:"POST",data:{url:e}})}function*x(e){yield{type:re,url:e};const t=yield T(e);return yield{type:ne,result:t},t}function*w(e,t){yield{type:oe,url:e,credentials:t};const r=yield T(e),n=r.isSuccess()&&r.data.itsec.routes.hasOwnProperty("/ithemes-security/v1/import-export/exports");yield{type:ie,discovery:r,hasSupport:n}}function I(){return{type:se}}function v(e){return{type:le,introspection:e}}function A(e){return{type:ce,exports:e}}function D(e){return{type:ae,sources:e}}function*b(e){yield{type:ue,export:e};const t=yield(r={data:e,path:"/ithemes-security/v1/import-export/exports",method:"POST"},{type:"WP_CONNECT_FETCH_RESULT",request:r});var r;return yield{type:pe,result:t},t}function*W(){if(!(yield(0,c.select)(Ye,"getWpConnectCredentials")))return;yield{type:de};const e=yield(0,c.select)(Ye,"getWpConnectCredentialsIntrospection"),t=(0,f.get)(e,["_links","self",0,"href"]);if(t)try{yield p({url:t,method:"DELETE"})}catch(e){console.error(e)}yield{type:fe}}function M(e){return{type:z,sources:e}}function N(e){return{type:K,map:e}}function L(e){return{type:Q,map:e}}function*Z(){const e=yield(0,c.select)(Ye,"getImportExportData"),t=yield(0,c.select)(Ye,"getImportSources"),r=yield(0,c.select)(Ye,"getImportUserMap"),n=yield(0,c.select)(Ye,"getImportRoleMap");return yield(0,c.apiFetch)({method:"POST",path:"/ithemes-security/rpc/import/transform",data:{export:e,sources:t,user_map:r,role_map:n}})}function*k(){yield(0,c.dispatch)(c.MODULES_STORE_NAME,"resetModuleEdits"),yield(0,c.dispatch)(c.MODULES_STORE_NAME,"resetSettingEdits"),yield(0,c.dispatch)(h.store,"resetAllEdits");const e=yield*Z(),t=yield(0,c.select)(Ye,"getImportSources");for(const r of t){if(!e.sources[r])continue;const t=e.sources[r];switch(r){case"modules":for(const[e,r]of Object.entries(t))yield(0,c.dispatch)(c.MODULES_STORE_NAME,"editModule",e,{status:{selected:r}});break;case"settings":for(const[e,r]of Object.entries(t))yield(0,c.dispatch)(c.MODULES_STORE_NAME,"editSettings",e,r);break;case"user-groups":const r=yield(0,c.select)(E.store,"getSettingDefinitions",null,void 0,{skipConditions:!0}),n=yield(0,c.select)(E.store,"getMatchables");for(const e of n)"user-group"!==e.type||(0,f.find)(t,{id:e.id})||(yield(0,c.dispatch)(h.store,"markGroupForDeletion",e.id));for(const s of t)if((0,f.find)(n,{id:s.id})||(yield(0,c.dispatch)(h.store,"createLocalGroup",s.id))){yield(0,c.dispatch)(h.store,"editGroup",s.id,{...s,roles:(0,f.map)(s.roles,"slug"),users:(0,f.map)(s.users,"id")});for(const t of r)if(e.sources.settings[t.id])for(const r of Object.keys(t.settings)){const n=(0,f.get)(e.sources.settings[t.id],r);Array.isArray(n)&&(yield(0,c.dispatch)(h.store,"editGroupSetting",s.id,t.id,r,n.includes(s.id)))}}}}}function*U(){const e=yield(0,c.select)(Ye,"getImportExportData"),t=yield(0,c.select)(Ye,"getImportSources"),r=yield(0,c.select)(Ye,"getImportUserMap"),n=yield(0,c.select)(Ye,"getImportRoleMap");return yield(0,c.apiFetchResult)({path:"/ithemes-security/rpc/import/run",method:"POST",data:{export:e,user_map:r,role_map:n,sources:(0,f.difference)(t,["modules","settings","user-groups"])}})}function F(){return{type:Y}}const V="RECEIVE_SOURCES",j="RECEIVE_EXPORTS",X="CREATE_EXPORT",H="FINISH_EXPORT",q="DELETE_EXPORT",$="SET_EXPORT_ERROR",B="VALIDATE_EXPORT_FILE",J="VALIDATE_EXPORT_DATA",G="VALIDATED_EXPORT",z="EDIT_IMPORT_SOURCES",K="EDIT_IMPORT_USER_MAP",Q="EDIT_IMPORT_ROLE_MAP",Y="IMPORT_RESET",ee="WPC_RESET",te="WPC_ENTER_WEBSITE",re="WPC_DISCOVER_REST_API",ne="WPC_DISCOVERED_REST_API",se="WPC_APPLICATION_REJECTED",oe="WPC_APPLICATION_APPROVED",ie="WPC_CHECK_SUPPORT",ce="WPC_RECEIVE_EXPORTS",ae="WPC_RECEIVE_SOURCES",ue="WPC_CREATE_EXPORT",pe="WPC_FINISH_EXPORT",le="WPC_RECEIVE_APP_PASSWORD",de="WPC_DELETE_CREDENTIALS",fe="WPC_DELETE_CREDENTIALS_SUCCESS",Ee=/(?:(?:\[(?:(?:(["'])((?:\\.|(?:(?!\1).))*)\1)|([-+]?\d+))\])|(?:\[(.?))|(?:(?:^|(?:(?!^)\.))([^\s"'\`\[\].\\]+))|(.))/g,he=/\\(.)/g,ye=e=>{let t,r=[];for(;t=Ee.exec(e);){let n,[,s,o,i,,c]=t;if(s)n=o.replace(he,((...e)=>e[1]===s?s:e[0]));else if(i)n=+i;else{if(!c)throw Ee.lastIndex=0,new SyntaxError(`Invalid step @ ${t.index}: ${JSON.stringify(e)}`);n=c}r.push(n)}return r},{isArray:ge}=Array,{defineProperty:Ce,values:_e}=Object,me=Symbol(),Se=Symbol(),Re=((e={})=>{const{collect:t=_e,default:r,flatMap:n="*",map:s="**",parser:o=ye,split:i=o}=e,c=!1===n?Se:n,a=!1===s?me:s,u="string"==typeof i?e=>e.split(i):i;return Ce((function e(n,s,...o){let i;switch(typeof s){case"string":i=u(s);break;case"number":case"symbol":i=[s];break;default:if(!ge(s))throw new TypeError("Invalid path: expected a string, array, number, or symbol");i=s}const p=o.length?o[0]:r,l=e=>void 0===e?p:e,d=i.length-1;for(let r=0;r<=d;++r){if(!n)return p;const s=i[r],o=s===c;if(o||s===a){const s=ge(n)?n:t(n);let c;if(r===d)c=l;else{const t=i.slice(r+1);c=r=>e(r,t,p)}return o?s.flatMap(c):s.map(c)}n=Number.isInteger(s)&&ge(n)?n[s<0?n.length+s:s]:n[s]}return l(n)}),"parse",{value:u})})();var Pe=r(28306);const Oe=[];function Te(e){return e.sources||Oe}function xe(e){return e.exports.items||Oe}function we(e){return e.creating.inProgress}function Ie(e){return e.creating.lastResult}function ve(e){return e.import.exportData}function Ae(e){return e.import.validatedExport}function De(e){return e.import.source}function be(e){return e.import.sources}function We(e){return e.import.userMap}function Me(e){return e.import.roleMap}function Ne(e,t,r,n){const s=[];for(const o of e){if(!t.includes(o.slug))continue;const e=o.transform_map[n];if(e&&r.sources[o.slug])for(const t of e)s.push(...Re(r.sources[o.slug],t))}return"users"===n?(0,f.uniqBy)(s,"id"):"roles"===n?(0,f.uniqBy)(s,"slug"):s}const Le=(0,Pe.Z)((e=>Ne(Te(e),be(e),e.import.exportData,"users")),(e=>[Te(e),be(e),e.import.exportData])),Ze=(0,Pe.Z)((e=>Ne(Te(e),be(e),e.import.exportData,"roles")),(e=>[Te(e),be(e),e.import.exportData]));function ke(e){return e.wpConnect.step}function Ue(e){return e.wpConnect.siteUrl}function Fe(e){return e.wpConnect.exports||Oe}function Ve(e){return Fe(e).length>0}function je(e){return Xe(e).length>0}function Xe(e){return e.wpConnect.sources||Oe}function He(e){return e.wpConnect.isCreating}function qe(e){return e.wpConnect.createdExport}function $e(e){return e.wpConnect.isDeleting&&!!Be(e)}function Be(e){return e.credentials}function Je(e){return!Be(e)&&["appAuthed","hasSupport","noSupport"].includes(ke(e))}function Ge(e){return e.wpConnect.discovery}function ze(e){return e.wpConnect.introspection}function Ke(e,t){const r=(0,f.get)(e,["wpConnect","discovery","data","itsec","routes",t,"_links","self",0,"href"]);if(r)return r;const n=(0,f.get)(e,["wpConnect","discovery","data","url"],"");if(!n.length)return;let s=t;return-1!==n.indexOf("?")&&(s=s.replace("?","&")),s=s.replace(/^\//,""),-1!==n.indexOf("?")&&(s=s.replace("?","&")),n+s}function Qe(e){return(0,f.get)(e,["wpConnect","discovery","data","index","authentication","application-passwords","endpoints","authorization"])}const Ye="ithemes-security/import-export",et={isFulfilled:e=>!!e.sources,*fulfill(){const e=yield(0,c.apiFetch)({path:"/ithemes-security/v1/import-export/sources"});yield y(e)}},tt={isFulfilled:e=>!!e.exports.items,*fulfill(){const e=yield(0,c.apiFetch)({path:"/ithemes-security/v1/import-export/exports"});yield g(e)}};function*rt(){if(!(yield i.controls.select(Ye,"hasWpConnectExports")))try{const e=yield p({path:"/ithemes-security/v1/import-export/exports"});yield A(e)}catch(e){yield A([]),yield(0,c.createNotice)("error",e.message||(0,a.__)("An unknown error occurred when fetching exports."))}}function*nt(){if(!(yield i.controls.select(Ye,"hasWpConnectSources")))try{const e=yield p({path:"/ithemes-security/v1/import-export/sources"});yield D(e)}catch(e){yield D([]),yield(0,c.createNotice)("error",e.message||(0,a.__)("An unknown error occurred when fetching export sources."))}}const st={isFulfilled:e=>!!e.wpConnect.introspection,*fulfill(){try{const e=yield p({path:"/wp/v2/users/me/application-passwords/introspect"});yield v(e)}catch(e){yield v({}),yield(0,c.createNotice)("error",e.message||(0,a.__)("An unknown error occurred when fetching credential details."))}}},ot={step:"enterWebsite",siteUrl:"",discovery:null,exports:null,sources:null,isCreating:!1,isDeleting:!1,createdExport:null,introspection:null},it={isValidating:!1,validatedExport:null,exportData:null,source:"",sources:[],userMap:{},roleMap:{}},ct=(0,i.combineReducers)({exports(e={items:null,errors:{}},t){switch(t.type){case j:return{...e,items:[...t.exports]};case H:return t.result.isSuccess()&&e.items?{...e,items:[t.result.data,...e.items]}:e;case q:return{...e,items:e.items.filter((e=>e.id!==t.id))};case $:return{...e,errors:{...e.errors,[t.id]:t.error}};default:return e}},creating(e={inProgress:!1,lastResult:null},t){switch(t.type){case X:return{...e,inProgress:!0,lastResult:null};case H:return{...e,inProgress:!1,lastResult:t.result};default:return e}},sources:(e=null,t)=>t.type===V?[...t.sources]:e,import:function(e=it,t){switch(t.type){case B:case J:return{...e,isValidating:!0,validatedExport:null,exportData:null,source:t.source};case G:const r={...e,isValidating:!1,validatedExport:t.result};return t.result.isSuccess()&&(r.exportData=t.result.data),r;case z:return{...e,sources:t.sources};case K:return{...e,userMap:{...t.map}};case Q:return{...e,roleMap:{...t.map}};case Y:return{...it};default:return e}},wpConnect:function(e=ot,t){switch(t.type){case ee:return{...ot};case te:return{...ot,siteUrl:t.url};case re:return{...e,step:"discovering"};case ne:return{...e,discovery:t.result,step:t.result.isSuccess()&&(0,f.has)(t.result,["data","index","authentication","application-passwords"])?"awaitingAuth":"noAppPasswords"};case se:return{...e,step:"appRejected"};case oe:const r=t.url===e.discovery.data.index.url;return{...ot,discovery:r?e.discovery:null,step:"appAuthed",siteUrl:t.url};case ie:return{...e,discovery:t.discovery,step:t.hasSupport?"hasSupport":"noSupport"};case ce:return{...e,exports:t.exports};case ae:return{...e,sources:t.sources};case ue:return{...e,isCreating:!0,createdExport:null};case pe:return{...e,isCreating:!1,createdExport:t.result};case le:return{...e,introspection:t.introspection};case de:return{...e,isDeleting:!0};case fe:return{...e,isDeleting:!1};default:return e}},credentials(e=null,t){switch(t.type){case ee:return null;case oe:return t.credentials;default:return e}}});(0,i.registerStore)(Ye,{controls:{...c.controls,...d},actions:n,selectors:s,resolvers:o,reducer:ct,persist:["import","wpConnect"]}),r.p=window.itsecWebpackPublicPath},28306:(e,t,r)=>{"use strict";var n,s;function o(e){return[e]}function i(){var e={clear:function(){e.head=null}};return e}function c(e,t,r){var n;if(e.length!==t.length)return!1;for(n=r;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function a(e,t){var r,a;function u(){r=s?new WeakMap:i()}function p(){var r,n,s,o,i,u=arguments.length;for(o=new Array(u),s=0;s<u;s++)o[s]=arguments[s];for(i=t.apply(null,o),(r=a(i)).isUniqueByDependants||(r.lastDependants&&!c(i,r.lastDependants,0)&&r.clear(),r.lastDependants=i),n=r.head;n;){if(c(n.args,o,1))return n!==r.head&&(n.prev.next=n.next,n.next&&(n.next.prev=n.prev),n.next=r.head,n.prev=null,r.head.prev=n,r.head=n),n.val;n=n.next}return n={val:e.apply(null,o)},o[0]=null,n.args=o,r.head&&(r.head.prev=n,n.next=r.head),r.head=n,n.val}return t||(t=o),a=s?function(e){var t,s,o,c,a,u=r,p=!0;for(t=0;t<e.length;t++){if(!(a=s=e[t])||"object"!=typeof a){p=!1;break}u.has(s)?u=u.get(s):(o=new WeakMap,u.set(s,o),u=o)}return u.has(n)||((c=i()).isUniqueByDependants=p,u.set(n,c)),u.get(n)}:function(){return r},p.getDependants=t,p.clear=u,u(),p}r.d(t,{Z:()=>a}),n={},s="undefined"!=typeof WeakMap},31600:e=>{e.exports=function(){return this.itsec.packages.data}()},87375:e=>{e.exports=function(){return this.itsec["user-groups"].api}()},62470:e=>{e.exports=function(){return this.itsec["user-groups"].ui}()},48015:e=>{e.exports=function(){return this.wp.data}()},6293:e=>{e.exports=function(){return this.wp.element}()},95122:e=>{e.exports=function(){return this.wp.i18n}()},73470:e=>{e.exports=function(){return this.wp.url}()},92819:e=>{"use strict";e.exports=window.lodash},71002:(e,t,r)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}r.d(t,{Z:()=>n})}},e=>{e.O(0,[5307],(()=>(98905,e(e.s=98905))));var t=e.O();((window.itsec=window.itsec||{})["import-export"]=window.itsec["import-export"]||{}).data=t}]);